"use strict";(window.webpackChunkconsentbit=window.webpackChunkconsentbit||[]).push([["src_util_bannerContentUtils_ts"],{"./src/util/bannerContentUtils.ts":(e,t,n)=>{n.r(t),n.d(t,{appendBannerContent:()=>v,createBannerButtons:()=>d,createBannerContent:()=>u,createBannerHeading:()=>r,createBannerParagraph:()=>a,createCloseButton:()=>c,getOrCreateCloseIconAsset:()=>s});var o=n("./src/util/bannerElementUtils.ts"),i=n("./src/types/webflowtypes.ts"),l=function(e,t,n,o){return new(n||(n=Promise))((function(i,l){function r(e){try{d(o.next(e))}catch(t){l(t)}}function a(e){try{d(o.throw(e))}catch(t){l(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const r=e=>l(void 0,void 0,void 0,(function*(){var t;const{selectedElement:n,config:i,translations:l}=e;return yield(0,o.createBannerElement)(n,{domId:"banner-heading",elementType:"heading",textContent:(null===(t=l[i.language])||void 0===t?void 0:t.heading)||"Cookie Settings",customAttributes:{}})})),a=e=>l(void 0,void 0,void 0,(function*(){var t;const{selectedElement:n,config:i,translations:l}=e;return yield(0,o.createBannerElement)(n,{domId:"banner-paragraph",elementType:"paragraph",textContent:(null===(t=l[i.language])||void 0===t?void 0:t.description)||"We use cookies to provide you with the best possible experience. They also allow us to analyze user behavior in order to constantly improve the website for you.",customAttributes:{}})})),d=e=>l(void 0,void 0,void 0,(function*(){var t,n,i;const{selectedElement:l,config:r,translations:a}=e,d=[],s=yield(0,o.createBannerElement)(l,{domId:"preferences-btn",elementType:"button",textContent:(null===(t=a[r.language])||void 0===t?void 0:t.preferences)||"Preferences",customAttributes:{}});d.push(s);const c=yield(0,o.createBannerElement)(l,{domId:"decline-btn",elementType:"button",textContent:(null===(n=a[r.language])||void 0===n?void 0:n.reject)||"Reject",customAttributes:{}});d.push(c);const u=yield(0,o.createBannerElement)(l,{domId:"accept-btn",elementType:"button",textContent:(null===(i=a[r.language])||void 0===i?void 0:i.accept)||"Accept",customAttributes:{}});return d.push(u),d})),s=e=>l(void 0,void 0,void 0,(function*(){try{const{getCloseIconColor:t}=yield Promise.resolve().then(n.bind(n,"./src/util/colorUtils.ts")),o=t(e),l=`close-icon-${o.replace("#","")}`,r=(yield i.default.getAllAssets()).find((e=>e.name&&e.name===l));if(r)return r;const a=new URL(n("./src/assets/X-Vector.svg"),n.b).href,d=yield fetch(a);if(!d.ok)throw new Error(`Failed to fetch X-Vector.svg: ${d.status} ${d.statusText}`);let s=yield d.text();s=s.replace(/fill="black"/g,`fill="${o}"`),s=s.replace(/fill='black'/g,`fill="${o}"`),s=s.replace(/fill=black/g,`fill="${o}"`),s=s.replace(/fill\s*=\s*["']black["']/gi,`fill="${o}"`),s=s.replace(/fill\s*=\s*["'][^"']*["']/gi,`fill="${o}"`),s=s.replace(/width="385"/g,'width="16"'),s=s.replace(/height="385"/g,'height="16"'),s.includes(`fill="${o}"`)||(s=s.replace(/<path([^>]*?)>/gi,((e,t)=>t.includes("fill=")?e:`<path${t} fill="${o}">`)));const c=new Blob([s],{type:"image/svg+xml"}),u=new File([c],`${l}.svg`,{type:"image/svg+xml"});return yield i.default.createAsset(u)}catch(t){throw console.error("Error getting or creating close icon asset:",t),t}})),c=e=>l(void 0,void 0,void 0,(function*(){var t,n;const{selectedElement:l,config:r}=e;if(!r.toggleStates.closebutton)return null;const a=yield(0,o.createBannerElement)(l,{domId:"close-button",elementType:"div",textContent:"",customAttributes:{consentbit:"close"}});if(a)try{const e=yield a.append(i.default.elementPresets.Image);if(!e)throw new Error("Failed to create image element");const o=yield s(r.color);yield e.setAsset(o);const l=(yield i.default.getStyleByName("consentCloseIcon"))||(yield i.default.createStyle("consentCloseIcon"));yield l.setProperties({width:"16px",height:"16px",display:"block"}),yield null===(n=(t=e).setStyles)||void 0===n?void 0:n.call(t,[l])}catch(d){console.error("Failed to set SVG icon for close button:",d)}return a})),u=e=>l(void 0,void 0,void 0,(function*(){const{selectedElement:t,config:n,translations:i}=e;try{const n=yield(0,o.createBannerElement)(t,{domId:"inner-div",elementType:"div",customAttributes:{}}),i=yield r(e),l=yield c(e),s=yield a(e),u=yield(0,o.createBannerElement)(t,{domId:"button-container",elementType:"div",customAttributes:{}});return{innerDiv:n,heading:i,closeButton:l,paragraph:s,buttonContainer:u,buttons:yield d(e)}}catch(l){throw l}})),v=(e,t)=>l(void 0,void 0,void 0,(function*(){try{const{innerDiv:n,heading:o,closeButton:i,paragraph:l,buttonContainer:r,buttons:a}=t;if(e.append&&(yield e.append(n),i&&(yield e.append(i)),n.append&&(yield n.append(o),yield n.append(l),yield n.append(r),r.append)))for(const e of a)yield r.append(e)}catch(n){throw n}}))},"./src/util/bannerElementUtils.ts":(e,t,n)=>{n.r(t),n.d(t,{cleanupExistingBanners:()=>l,createBannerContainer:()=>r,createBannerElement:()=>d,createBannerStyles:()=>a});var o=n("./src/types/webflowtypes.ts"),i=function(e,t,n,o){return new(n||(n=Promise))((function(i,l){function r(e){try{d(o.next(e))}catch(t){l(t)}}function a(e){try{d(o.throw(e))}catch(t){l(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const l=e=>i(void 0,void 0,void 0,(function*(){try{const t=(yield o.default.getAllElements()).map((e=>i(void 0,void 0,void 0,(function*(){var t;const n=yield null===(t=e.getDomId)||void 0===t?void 0:t.call(e);return{el:e,domId:n}})))),n=(yield Promise.all(t)).filter((({domId:t})=>t&&e.includes(t))).map((({el:e,domId:t})=>e));yield Promise.all(n.map((e=>i(void 0,void 0,void 0,(function*(){var t,n;try{yield null===(t=e.getDomId)||void 0===t?void 0:t.call(e);const o=yield null===(n=e.getChildren)||void 0===n?void 0:n.call(e);(null==o?void 0:o.length)&&(yield Promise.all(o.map((e=>e.remove())))),yield e.remove()}catch(i){o.default.notify({type:"error",message:"Failed to remove a banner."})}})))))}catch(t){throw t}})),r=(e,t)=>i(void 0,void 0,void 0,(function*(){try{const n=yield e.before(o.default.elementPresets.DivBlock);if(!n)throw new Error("Failed to create div.");return n.setDomId&&(yield n.setDomId(t)),n}catch(n){throw n}})),a=e=>i(void 0,void 0,void 0,(function*(){try{return yield Promise.all(Object.values(e).map((e=>i(void 0,void 0,void 0,(function*(){return(yield o.default.getStyleByName(e))||(yield o.default.createStyle(e))})))))}catch(t){throw t}})),d=(e,t)=>i(void 0,void 0,void 0,(function*(){try{let n;switch(t.elementType){case"div":n=yield e.before(o.default.elementPresets.DivBlock);break;case"heading":n=yield e.before(o.default.elementPresets.Heading),n&&n.setHeadingLevel&&(yield n.setHeadingLevel(2));break;case"paragraph":n=yield e.before(o.default.elementPresets.Paragraph);break;case"button":n=yield e.before(o.default.elementPresets.Button);break;case"link":n=yield e.before(o.default.elementPresets.LinkBlock);break;default:throw new Error(`Unsupported element type: ${t.elementType}`)}if(!n)throw new Error(`Failed to create ${t.elementType} element`);if(t.textContent&&n.setTextContent&&(yield n.setTextContent(t.textContent)),t.customAttributes)for(const[e,o]of Object.entries(t.customAttributes))n.setCustomAttribute&&(yield n.setCustomAttribute(e,o));return n}catch(n){throw n}}))}}]);